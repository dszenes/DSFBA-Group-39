
# 3 Data

```{r, echo = FALSE, message = FALSE}
source(here::here("scripts/setup.R"))
```

## 3.1 Crime Data

First, we will load two data sets that record the incident reports that have been filed to the police.

### 3.1.1 2018 To Present

```{r}
data2 <- read_csv(file = here::here("data/Police_Department_Incident_Reports__2018_to_Present.csv"))
data2 <- as_tibble(data2)
kable(str(data2))

```
Source of the data set: [https://data.sfgov.org/Public-Safety/Police-Department-Incident-Reports-2018-to-Present/wg3w-h783]

This dataset covers the period from the 1st January 2018 to the day in 2020 where we've downloaded the data and contains about 408K observations.

* Column of the data set:
  + `Incident Datetime` The date and time when the incident occurred
  + `Incident Date` The date the incident occurred
  + `Incident Time` The date the incident occurred
  + `Incident Year` The year the incident occurred, provided as a convenience for filtering
  + `Incident Day of Week`The day of week the incident occurred
  + `Report Datetime` Distinct from Incident Datetime, Report Datetime is when the report was filed.
  + `Row ID` A unique identifier for each row of data in the dataset
  + `Incident ID` This is the system generated identifier for incident reports. Incident IDs and Incident Numbers both uniquely identify reports, but Incident Numbers are used when referencing cases and report documents.
  + `Incident Number` The number issued on the report, sometimes interchangeably referred to as the Case Number. This number is used to reference cases and report documents.
  + `CAD Number` The Computer Aided Dispatch (CAD) is the system used by the Department of Emergency Management (DEM) to dispatch officers and other public safety personnel.
  + `Report Type Code`A system code for report types, these have corresponding descriptions within the dataset.
  + `Report Type Description` The description of the report type, can be one of: Initial; Initial Supplement; Vehicle Initial; Vehicle Supplement; Coplogic Initial; Coplogic Supplement
  + `Filed Online` Non- emergency police reports can be filed online by members of the public using SFPD’s self-service reporting system called Coplogic Values in this field will be “TRUE” if Coplogic was used to file the report. Please reference the link below for additional info
  + `Incident Code` Incident Codes are the system codes to describe a type of incident. A single incident report can have one or more incident types associated.
  + `Incident Category` A category mapped on to the Incident Code used in statistics and reporting.
  + `Incident Subcategory` A subcategory mapped to the Incident Code that is used for statistics and reporting.
  + `Incident Description` The description of the incident that corresponds with the Incident Code.
  + `Resolution` The resolution of the incident at the time of the report.
  + `Intersection` The 2 or more street names that intersect closest to the original incident separated by a backward slash
  + `CNN` The unique identifier of the intersection for reference back to other related basemap datasets.
  + `Police District` The Police District where the incident occurred. District boundaries can be reviewed in the link below [https://data.sfgov.org/d/wkhw-cjsf]. Please note this field is entered by officers and not based on the point.
  + `Analysis Neighborhood` This field is used to identify the neighborhood where each incident occurs. Neighborhoods and boundaries are defined by the Department of Public Health and the Mayor's Office of Housing and Community Development. Please reference the link below for additional info: [https://data.sfgov.org/d/p5b7-5n3h].
  + `Supervisor District` There are 11 members elected to the Board of Supervisors in San Francisco, each representing a geographic district. The Board of Supervisors is the legislative body for San Francisco. The districts are numbered 1 through 11. Please reference the link below for additional info: [https://data.sfgov.org/d/8nkz-x4ny].
  + `Latitude` The latitude coordinate
  + `Longitude` The longitude coordinate
  + `point` The point geometry used for mapping features in the open data portal platform. Latitude and Longitude are provided separately as well as a convenience.

In order to be able to join the two datasets that have a different temporality and thus focus on variables to answer the chosen research questions, we have removed a few columns. 

* We will focus on these variables:`Incident Date`, `Incident Time`, `Incident Day of Week`, `Incident Category`, `Resolution`, `Analysis Neighborhood`, `point`.

This information will be useful to us in order to look at the evolution of crime over time and also to analyze crime by neighborhood and thus be able to analyze whether this variation in crime across neighborhoods can be explained by socio-economic variables.

### 3.1.2 2003 To 2018

```{r}
data1 <- read_csv(file = here::here("data/Police_Department_Incident_Reports__Historical_2003_to_May_2018.csv")) 
data1 <- as_tibble(data1)

kable(str(data1))
```
Source of the data set: [https://data.sfgov.org/Public-Safety/Police-Department-Incident-Reports-Historical-2003/tmnf-yvry]

This dataset covers the period from the 1st January 2003 to the 15th May 2018 and contains about 2.16M observations.

* Column of the data set:
  + `PdId` A unique identifier for each row of data in the dataset
  + `IncidntNum` The number issued on the report, sometimes interchangeably referred to as the Case Number. This number is used to reference cases and report documents.
  + `Incident Code` Incident Codes are the system codes to describe a type of incident. A single incident report can have one or more incident types associated.
  + `Incident Category` A category mapped on to the Incident Code used in statistics and reporting.
  + `Descript` The description of the incident that corresponds with the Incident Code.
  + `DayOfWeek` The day of week the incident occurred
  + `Date` The date the incident occurred
  + `Time` The date the incident occurred
  + `PdDistrict` The Police District where the incident occurred. District boundaries can be reviewed in the link below. Please note this field is entered by officers and not based on the point. Reference here: [https://data.sfgov.org/d/wkhw-cjsf].
  + `Resolution` The resolution of the incident at the time of the report.
  + `Address` The 2 or more street names that intersect closest to the original incident separated by a backward slash
  + `Y` The latitude coordinate
  + `X` The longitude coordinate
  + `location` The point geometry used for mapping features in the open data portal platform. Latitude and Longitude are provided separately as well as a convenience.
  + `Analysis Neighborhoods 2 2` This field is used to identify the neighborhood where each incident occurs. Neighborhoods and boundaries are defined by the Department of Public Health and the Mayor's Office of Housing and Community Development. Please reference the link below for additional info: [https://data.sfgov.org/d/p5b7-5n3h].

* As for the 3.1.1 data set, we will focus on these variables:`Incident Category`, `DayOfWeek`, `DayOfWeek`, `Date`, `Time`, `Resolution`, `Y`, `X`, `location`,`Analysis Neighborhoods 2 2`.

For the `Analysis Neighborhoods 2 2`, we had to see if the neighbourhood numbers corresponded to an alphabetical ranking of the neighbourhoods. It was absolutely not the case and we had to look for each number, which was the corresponding neighborhood. All this in order to join the two data sets.

## 3.2 Socio-Economic Data

### 3.2.1 2012 To 2016

Then, we will load four data sets that record the evolution of some socio-economic variables for each neighborhood of San Francisco. As these reports - built with census data - were only exported in pdf format, we decided to create our own data set in csv in order to use the information from these reports for different periods.

```{r}
data3 <- read_csv(file = here::here("data/American_Community_Survey_2012-2016.csv"))
data3 <- as_tibble(data3)
kable(str(data3))

```
Source of the data set: [https://default.sfplanning.org/publications_reports/SF_NGBD_SocioEconomic_Profiles/2012-2016_ACS_Profile_Neighborhoods_Final.pdf]

### 3.2.2 2010 To 2014

```{r}
data4 <- read_csv(file = here::here("data/American_Community_Survey_2010-2014.csv"))
data4 <- as_tibble(data4)
kable(str(data4))

```
Source of the data set: [https://default.sfplanning.org/publications_reports/SF_NGBD_SocioEconomic_Profiles/2011-2015_ACS_Profile_Neighborhoods_Final.pdf]


### 3.2.3 2011 To 2015

```{r}
data5 <- read_csv(file = here::here("data/American_Community_Survey_2011-2015.csv"))
data5 <- as_tibble(data5)
kable(str(data5))

```
Source of the data set: [https://default.sfplanning.org/publications_reports/SF_NGBD_SocioEconomic_Profiles/2010-2014_ACS_Profile_Neighborhoods_v3AH.pdf]

### 3.2.4 2005 To 2009

```{r}
data6 <- read_csv(file = here::here("data/American_Community_Survey_2005-2009.csv"))
data6 <- as_tibble(data6)
kable(str(data6))
```
Source of the data set: [https://sf-planning.org/sites/default/files/FileCenter/Documents/8501-SFProfilesByNeighborhoodForWeb.pdf]

Those data sets contains 41 rows (each rows is one neighborhood of San Francisco)

* Column of the data sets:
  + `NEIGHBOORHOD` Each neighborhood of San Franciso. Segmented using the geospatial data in this link : [https://data.sfgov.org/Geographic-Locations-and-Boundaries/Analysis-Neighborhoods/p5b7-5n3h]
  + `Time Horizon` This column highlights the time horizon where the data have been collected.
  + `Total Population` This column highlights the total population for each neighbourhood.
  + `Households` This column highlights the total households number for each neighbourhood.
  + `Family Households` This column highlights the proportion of family-households within a neighborhood.
  + `Non-Family Households` This column highlights the proportion of non-family-households within a neighbourhood
  + `Average Household Size` This column highlights the average household size for each neighbourhood.
  + `Asian` proportion of Asian people within the neighborhood
  + `Black/African American` proportion of Black/African American people within the neighborhood
  + `White` proportion of White people within the neighborhood
  + `Native American Indian` proportion of Native American Indian people within the neighborhood
  + `Native Hawaiian/Pacific Islander` proportion of Native Hawaiian/Pacific Islander people within the neighborhood
  + `Other/Two or More Races` proportion of Other/Two or More Races people within the neighborhood
  + `Latino (of Any Race)` proportion of Latino (of Any Race)  people within the neighborhood
  + `0-4 years` proportion of people with age = [0-4] within the neighborhood
  + `5-17 years` proportion of people with age = [5-17] within the neighborhood
  + `18-34 years` proportion of people with age = [18-34] within the neighborhood
  + `35-59 years` proportion of people with age = [35-59] within the neighborhood
  + `60 and older` proportion of people with age = [60-older] within the neighborhood
  + `Median Age` This column highlights the median age  within a neighbourhood
  + `High School or Less` proportion of people with only a High School degree or less within the neighborhood
  + `Some College/Associate Degree` proportion of people with only associate College degree or less within the neighborhood
  + `College Degree` proportion of people with only College Degree within the neighborhood
  + `Graduate/Professional Degree`  proportion of people with only Graduate/Professional Degree within the neighborhood
  + `Foreign Born` proportion of foreign born people within the neighborhood
  + `English Only` proportion of english only speakers people within the neighborhood
  + `Spanish Only` proportion of spanish only speakers people within the neighborhood
  + `Asian/Pacific Islander` proportion of asian only speakers people within the neighborhood
  + `Other European Languages Only` proportion of european languages only speakers people within the neighborhood
  + `Other Languages` proportion of other languages only speakers people within the neighborhood
  + `Units of Housing` this column highlights the number of housings for each neighbourhood.
  + `Median Year Structure Build` this column highlights the median year structure housing  for each neighbourhood.
  + `Median Rent` this column highlights the median housing rent for each neighbourhood.
  + `Median Home Value` this column highlights the median home value for each neighbourhood.
  + `Median Household Income` this column highlights the median household income for each neighbourhood.
  + `Percent in Poverty` this column highlights the % in poverty  for each neighbourhood.
  + `Unemployment Rate` this column highlights the % of unemployment for each neighbourhood.
  + `Population Density per Acre` this column highlights the number of people per Acre for each neighborhood.
  
  
  
  With all these variables, we can see each neighborhood in terms of the number and density of the population, household composition, race, age distribution, education, languages spoken, and the economy of the neighborhood. This will be very helpful in answering some of our research questions.
  
  
## 3.3 Transport Data
### 3.3.1 Public transport

Next, we will upload a dataset that counts the number of transit stops in SFMTA system. We will use this data to analyze the transit situation by neighborhood.

```{r}
data8 <- read_csv(file = here::here("data/Muni_Stops.csv"))
```
Source of the data set: [https://catalog.data.gov/dataset/muni-stops].

* Here are the columns we are going to focus on::
  + `STOPNAME` Give all the name of all the transit stop
  + `shape` The point geometry used for mapping features
  + `Analysis Neighborhoods` This column gives in which neighborhood of San Franciso the transit stops is.
  
We don't even bother to show you the other columns of this data set because we haven't found any information about its meaning. We will only use this data set to see if the density of the number of public transports coincides with the neighborhoods with the most crime.
  
## 3.4 Geospacialisation Data
### 3.4.1 Public transport

```{r}
data7 <- st_read(dsn = here::here("data/Transit_Routes.shp"))
```
Source of the data set: [https://geodata.lib.berkeley.edu/catalog/stanford-mq273bz6123]

“This point shapefile contains the locations of transit routes, including railways, ferries, and buses in the San Francisco Bay Area of California. This layer is part of the Bay Area Metropolitan Transportation Commission (MTC) GIS Maps and Data collection.This dataset is intended for researchers, students, and policy makers for reference and mapping purposes, and may be used for basic applications such as viewing, querying, and map output production, or to provide a basemap to support graphical overlays and analysis with other spatial data.”

This data set will be useful to analyze the density of the public transport network and find a comparison with the neighbourhoods with the most crime.

### 3.4.2 Neighborhood

```{r}
data9 <- st_read(dsn = here::here("data/geo_export_a105db98-2460-49d1-9618-57cf22a53772.shp"))
```
Source of the data set: [https://data.sfgov.org/Geographic-Locations-and-Boundaries/Analysis-Neighborhoods/p5b7-5n3h]

This data set contains multi-polygons that are supposed to represent the segmentation of neighbourhoods according to the Analysis of Neighborhood. We will use this data set extensively for our geospatial analyses.

* Wrangling/cleaning

```{r}
crime2018_2020 <-
  data2 %>% select(
    `Incident Date`,
    `Incident Time`,
    `Incident Day of Week`,
    `Incident Category`,
    `Incident Description`,
    `Resolution`,
    point,
    `Analysis Neighborhood`
  ) %>%
  separate(point, into = c("lon", "lat"), sep = "[,]+")
#select the variable that we're interested in (time horizon 2018-2020)

crime2018_2020$`Analysis Neighborhood`[crime2018_2020$`Analysis Neighborhood` == "Mission"] <- "Mission Bay"
#rename the rows in the column Analysis Neighborhood, in order have the same neighboorhood in the two data set

crime2018_2020$lat = substr(crime2018_2020$lat, 2 , nchar(crime2018_2020$lat) - 1)
crime2018_2020$lon = substr(crime2018_2020$lon, 2 , nchar(crime2018_2020$lon))
options(digits = 13)
crime2018_2020$lat <- sapply(crime2018_2020$lat, as.numeric)
crime2018_2020$lon <- sapply(crime2018_2020$lon, as.numeric)
#Clean some of the column in order to make geospacial representation
```

```{r}
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "1"] <- "Bayview Hunters Point"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "2"] <- "Bernal Heights"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "3"] <- "Haight Ashbury"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "4"] <- "Mission Bay"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "5"] <- "Castro/UpperMarket"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "6"] <- "Chinatown"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "7"] <- "Excelsior"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "8"] <- "Financial District"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "9"] <- "Hayes Valley"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "10"] <- "Glen Park"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "11"] <- "Inner Richmond"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "12"] <- "Golden Gate Park"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "13"] <- "Marina"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "14"] <- "Inner Sunset"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "15"] <- "Japantown"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "16"] <- "Lakeshore"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "17"] <- "Lincoln Park"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "18"] <- "Lone Mountain"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "19"] <- "McLaren Park"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "20"] <- "Mission"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "21"] <- "Nob Hill"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "22"] <- "Noe Valley"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "23"] <- "North Beach"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "24"] <- "Oceanview/Merced/Ingleside"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "25"] <- "Portola"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "26"] <- "Potrero Hill"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "27"] <- "Presidio"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "28"] <- "Outer Mission"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "29"] <- "Outer Richmond"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "30"] <- "Pacific Height"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "31"] <- "Presidio Heights"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "32"] <- "Russian Hill"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "33"] <- "Seacliff"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "34"] <- "South of Market"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "35"] <- "Sunset/Parkside"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "36"] <- "Tenderloin"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "37"] <- "Treasure Island"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "38"] <- "Twin Peaks"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "39"] <- "Visitacion Valley"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "40"] <- "Western Addition"
data1$`Analysis Neighborhoods 2 2`[data1$`Analysis Neighborhoods 2 2` == "41"] <- "West of Twin Peaks"
#change the `Analysis Neighborhoods 2 2` values. In the raw dataset, each neighborhood is characterized by a number. These code lines are used to assign the neighborhood names to each number.

data1_colchange <- data1 %>% mutate(Date = mdy(Date)) %>% 
  rename(
    `Incident Date` = Date,
    `Incident Time` = Time,
    `Incident Day of Week` = DayOfWeek,
    `Incident Category` = Category,
    `Incident Description` = Descript,
    `Analysis Neighborhood` = `Analysis Neighborhoods 2 2`,
    point = location
  ) #change the column name of the data set with horizon 2003-2018 in order to bind the 2 data set

crime2003_2018 <- data1_colchange %>% select(`Incident Date`,`Incident Time`, `Incident Day of Week`,
                                     `Incident Category`, `Incident Description`,
                                     Resolution, point, `Analysis Neighborhood`)
#select the variable that we're interested in

crime2003_2020 <- bind_rows(crime2018_2020, crime2003_2018)
#bind both data set
```

```{r}
p <- data8 %>% separate(shape, into = c("point","lon", "lat"), sep = "[ ]+") #separate the geo information from the shape column in order to make a longitude and a latitude column.

p$lat = substr(p$lat, 1 , nchar(p$lat) - 1)
p$lon = substr(p$lon, 2 , nchar(p$lon))
#remove unnecessary characters

options(digits = 6)
p$lat <- sapply(p$lat, as.numeric)
p$lon <- sapply(p$lon, as.numeric)
#change the column type: from chr to num

transport <- p %>% select("STOPNAME", "lat", "lon","Analysis Neighborhoods") %>% filter(!(is.na(`Analysis Neighborhoods`)))
#select the variable of interest while removing the NA values if a transport stops is not characterized by his neighborhood

transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "1"] <- "Bayview Hunters Point"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "2"] <- "Bernal Heights"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "3"] <- "Haight Ashbury"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "4"] <- "Mission Bay"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "5"] <- "Castro/UpperMarket"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "6"] <- "Chinatown"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "7"] <- "Excelsior"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "8"] <- "Financial District"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "9"] <- "Hayes Valley"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "10"] <- "Glen Park"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "11"] <- "Inner Richmond"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "12"] <- "Golden Gate Park"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "13"] <- "Marina"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "14"] <- "Inner Sunset"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "15"] <- "Japantown"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "16"] <- "Lakeshore"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "17"] <- "Lincoln Park"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "18"] <- "Lone Mountain"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "19"] <- "McLaren Park"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "20"] <- "Mission"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "21"] <- "Nob Hill"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "22"] <- "Noe Valley"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "23"] <- "North Beach"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "24"] <- "Oceanview/Merced/Ingleside"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "25"] <- "Portola"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "26"] <- "Potrero Hill"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "27"] <- "Presidio"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "28"] <- "Outer Mission"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "29"] <- "Outer Richmond"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "30"] <- "Pacific Height"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "31"] <- "Presidio Heights"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "32"] <- "Russian Hill"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "33"] <- "Seacliff"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "34"] <- "South of Market"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "35"] <- "Sunset/Parkside"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "36"] <- "Tenderloin"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "37"] <- "Treasure Island"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "38"] <- "Twin Peaks"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "39"] <- "Visitacion Valley"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "40"] <- "Western Addition"
transport$`Analysis Neighborhoods`[transport$`Analysis Neighborhoods` == "41"] <- "West of Twin Peaks"
#change the `Analysis Neighborhoods` values. In the raw dataset, each neighborhood is characterized by a number. These code lines are used to assign the neighborhood names to each number.

```


* Spotting mistakes and missing data (could be part of EDA too)
* Listing anomalies and outliers (could be part of EDA too)